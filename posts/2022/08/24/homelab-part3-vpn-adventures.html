<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="preconnect" href="https://cdnjs.cloudflare.com"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><title> Zelenyy's Blog</title><link rel="shortcut icon" href="/img/favicon.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="sitemap" type="application/xml" title="sitemap" href="http://zelenyy.info/sitemap.xml" /><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;700&family=Fira+Code:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,300;1,400;1,500;1,600;1,700;1,900&display=swap" rel="stylesheet"><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}html{font-size:15px}html,html[data-theme="light"]{--text-font: DM Sans;--source-code-font: Fira Code;--very-light-text-color: rgb(222, 222, 222);--light-text-color: rgb(89, 183, 255);--medium-text-color: #555;--main-text-color: #333;--highlight-text-color: #6cb4a0;--dark-text-color: #393e46;--link-color: rgb(50, 87, 209);--code-bg-color: rgb(245, 245, 245);background-color:#fff}html #theme-toggle div,html[data-theme="light"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:none;background-color:var(--theme-ui-colors-transparent, transparent);transform:scale(1);transition:all 0.45s ease 0s;overflow:hidden;box-shadow:inset 8px -8px 0px 0px var(--theme-ui-colors-toggleIcon, #2d3748)}html #theme-toggle div::before,html[data-theme="light"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:none;border-radius:50%;transform:translate(0px, 0px);opacity:1;transition:transform 0.45s ease 0s}html #theme-toggle div::after,html[data-theme="light"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),0 23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),-23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748);transform:scale(0);transition:all 0.35s ease 0s}body{font-family:var(--text-font),monospace;text-rendering:optimizeLegibility;line-height:1.75;color:var(--main-text-color)}a{color:var(--link-color);text-decoration:none}.post p{margin:1rem 0}.meta{margin:1.4rem 0}code,pre{background:var(--code-bg-color);margin:0 -27px;border-width:1px}code{font-family:var(--source-code-font);margin:unset;font-size:0.8rem;color:var(--highlight-text-color)}pre code{background-color:unset;color:unset}pre{border-width:3px;padding:0.8rem;white-space:pre-wrap;border-style:none none none solid;border-color:var(--light-text-color)}img{max-width:100%}hr{background:var(--light-text-color);height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:0.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem 0}section{margin-top:4rem}.greetings{display:inline-flex;width:100%;align-items:center;justify-content:space-between}.greetings>img{width:150px}blockquote{font-style:italic;border-left:5px solid var(--dark-text-color);padding-left:1rem}h1{color:var(--main-text-color);text-transform:uppercase;font-size:3rem;font-weight:bold;margin-bottom:1.5rem}h2,h3,h4,h5{font-weight:bold;margin-bottom:1.5rem;font-size:2rem}h2{font-size:1.8rem}h3{font-size:1.6rem}h4{font-size:1.4rem}h5{font-size:1.2rem}h6{font-size:1rem}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts{margin-top:1rem}.posts>h3{font-weight:500}.post ul{margin:0px;margin:0px 0px 10px 10px}.post ol{margin:0px;margin:0px 0px 10px 15px}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:0.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:bold}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}time{color:var(--main-text-color)}.post>h1.title{font-size:2.5rem;margin-top:0;margin-bottom:0}.post>time{margin-bottom:0;margin-top:3rem}.highlight{margin:0px}.intro_main{min-height:92vh}main{display:flex;max-width:47rem;margin:-5rem auto 0;padding:2.4rem 2rem;flex-direction:column;position:relative;flex-grow:1}.flex-row-between{display:flex;flex-direction:row;justify-content:space-between}.social-footer{padding:1rem;position:absolute;text-align:center;width:100%;color:#92B359;text-align:center;border-style:solid none none none;border-color:#367BB3;border-width:1px}.social-footer .social-footer-icons .fa{font-size:1.3rem;color:#a9a9a9}.social-footer .social-footer-icons .fa:hover{color:dimgray;transition:color 0.3s ease-in}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}main{padding:0 2rem}}section{flex-grow:999;display:flex;flex-direction:column}figcaption{font-size:smaller}.bio{margin-bottom:1rem}::selection{background-color:#fffba0;color:#333}.post-nav{display:flex;position:relative;margin-top:0;border-top:2px solid var(--light-text-color);line-height:1.4}.post-nav .post-nav-item{border-bottom:0;padding-bottom:10px;width:50%;padding-top:10px;text-decoration:none;box-sizing:border-box}.post-nav .post-nav-item .post-title{color:var(--main-text-color)}.post-nav .post-nav-item:hover .post-title,.post-nav .post-nav-item:focus .post-title{color:var(--link-color);opacity:0.9}.post-nav .post-nav-item .nav-arrow{font-size:17px;color:var(--main-text-color);margin-bottom:3px;font-weight:bold}.post-nav .post-nav-item:nth-child(1){padding-left:0;padding-right:20px}.post-nav .post-nav-item:nth-child(2){text-align:center;padding-left:20px;padding-right:20px}.post-nav .post-nav-item:nth-child(3){text-align:right;padding-right:0;padding-left:20px}.tags ul{list-style:none;display:grid;grid-template-columns:auto auto auto auto auto auto;grid-template-rows:auto auto auto auto}.tags li{white-space:normal;text-overflow:ellipsis}.timeline{position:center;width:650px;margin:-6em auto;padding:1px;list-style-type:none}@media (max-width: 860px){.timeline{width:100%}}.timeline:before{position:absolute;left:50%;top:0;content:' ';display:block;width:6px;height:100%;margin-left:-3px;background:var(--light-text-color);z-index:5}@media (max-width: 375px){.timeline:before{height:150%}}.timeline li{padding:2em 0}@media (max-width: 860px){.timeline li{padding:2em 0}}.timeline li::after{content:"";display:block;clear:both;visibility:hidden}.direction-l{position:relative;width:287px;float:left;text-align:right}@media (max-width: 860px){.direction-l{float:none;width:100%;text-align:center}}.direction-l .flag{color:#333;box-shadow:-1px 1px 1px rgba(0,0,0,0.52)}.direction-l .flag:after{content:"";position:absolute;left:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-left-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-l .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-l .time-wrapper{float:left}@media (max-width: 860px){.direction-l .time-wrapper{float:none}}.direction-r{position:relative;width:293px;float:right;text-align:left}@media (max-width: 860px){.direction-r{float:none;width:100%;text-align:center}}.direction-r .flag{color:#333;box-shadow:1px 1px 1px rgba(0,0,0,0.52)}.direction-r .flag:after{content:"";position:absolute;right:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-right-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-r .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-r .flag:before{left:-40px}.direction-r .time-wrapper{float:right}@media (max-width: 860px){.direction-r .time-wrapper{float:none}}.flag-wrapper{position:relative;display:inline-block;text-align:center}@media (max-width: 860px){.flag-wrapper{text-align:center}}.flag-wrapper .flag{position:relative;display:inline;background:#f8f8f8;padding:6px 10px;border-radius:5px;font-weight:600;text-align:left}@media (max-width: 860px){.flag-wrapper .flag{background:#fff;z-index:15}}.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:60%;right:-40px;content:' ';display:block;width:12px;height:12px;margin-top:-10px;background:#fff;border-radius:10px;border:4px solid var(--link-color);z-index:10}@media (max-width: 860px){.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:-30px;left:53%;content:' ';display:block;margin-left:-10px}}.time-wrapper{display:inline;line-height:1em;font-size:0.66666em;color:var(--link-color);vertical-align:middle}@media (max-width: 860px){.time-wrapper{display:block;position:relative;margin:4px 0 0 0;z-index:14}}.time-wrapper .time{display:inline-block;padding:4px 6px;background:#f8f8f8}.desc{margin:1em 0.2em -3.5em 0;font-size:0.9em;line-height:1.5em}.desc a{color:var(--link-color);text-decoration:none}.desc a:hover{text-decoration:underline}@media (max-width: 860px){.desc{position:relative;margin:1em 1em 0 1em;padding:1em;background:var(--code-bg-color);box-shadow:0 0 1px rgba(0,0,0,0.2);z-index:15}}</style></head><body><main><section class="post"><div class="flex-row-between"> <a href="http://zelenyy.info/"><< back</a><div></div></button></div><time datetime="2022-08-24T00:00:00+10:00">Aug 24, 2022</time><h1 class="title"> Home Networking Part 3 - VPN, Access Points and Routers</h1><!-- <span class="meta"> </span> --><p>Welcome back to another episode of me boasting about my home networking setup! It’s been a while since the last part and I’m glad to announce that there have been some relatively significant changes to how its organised. Firstly, I shall present my updated network diagram, then continue on to the first item.</p><p><img src="/img/2022-08-24-Homelab-Part3-VPN-adventures/Network.png" alt="Network diagram" /></p><h2 id="server-cabinet"> Server Cabinet <a href="#server-cabinet">#</a></h2><p>I’ll start with the most visually different update to my setup which is the addition of a 24U server cabinet.</p><p><img src="/img/2022-08-24-Homelab-Part3-VPN-adventures/server_cabinet.jpg" alt="Server Cabinet" /></p><p>The first thing you might think is why would someone like me buy a server cabinet? To answer your question, it was free! A friend of mine was trying to get rid of it which was really convenient as I was actually looking to possibly buy a small rack. So, me taking it was a win for both of us (Plus she threw in some rack-mount power strips and shelves!). The second question you may have is, “Why did you need a rack?”. This question was asked almost immediately by all of my friends as soon as I told them about it. Although I didn’t actually need a rack, it really does help with organisation of my gear and how the room looks and low and behold, all my friends agreed that the room looks a lot better with a nice cabinet rather than a stack of gear atop a box. In addition to looks, it would help in maintenance as I can slide individual servers out which will become important once I get a new server, as well as that it helps with sound isolation.</p><p>NOTE: <em>If you happen to be reading this and are looking to buy a server cabinet, One thing I found out the hard way is that 2 of the measurements (height and width) are standardised, However depth is NOT standardised and thus make sure you double check your servers and gear can fit into the rack before buying it!</em></p><h2 id="new-router"> New Router <a href="#new-router">#</a></h2><p>The next item on the agenda is a new router, you may have even seen it in the previous photo, and it is my new router! Specifically, it is a TP-Link Omada ER605 router.</p><p><img src="/img/2022-08-24-Homelab-Part3-VPN-adventures/router.jpg" alt="omada er605 router" /> This was a bit of an upgrade from my old router and allows some more advanced configurations such as VLANs and VPNs. As well as those features, I can also set up the Omada software on a server and monitor my network through that. But the main reason I bought the router was because I wanted my router closer to my network so I could actually do VLANs with multiple patch cables going into my switch instead of running separate longer cables around my apartment to my old router.</p><h2 id="vpn"> VPN <a href="#vpn">#</a></h2><p>Along with the basic setup of my router I also configured a VPN for my network. Luckily my router supports client-to-network VPNs with some different protocols, that being IPsec, L2TP, PPTP and OpenVPN. At first, I set up L2TP/IPsec which seems like the best option for my use case. Specifically, my use case would be really only 2 things:</p><ol><li>Client-to-network tunnelling</li><li>The ability to resolve internal DNS queries</li></ol><p>L2TP/IPsec worked well on my laptop as within the router I was able to set up an account for my laptop and specify the DNS server. Along with DNS it was also built into windows already, so I didn’t need to install special clients. The only problem with this setup was that when I tried to set up the connection on my phone, although it does have the ability to set up VPN connections, from android 12 onwards L2TP and some older protocols were removed which meant I couldn’t connect on my phone.</p><p>This made me switch to OpenVPN which although was not built into windows nor android, it did have official clients. On the router end, the setup was a little more complicated as for some weird reason it seems that OpenVPN was an afterthought on TP-Link’s half, as you are able to configure VPN IP pools which L2TP can use, but within the config for OpenVPN you need to manually specify the range with a subnet prefix. Though despite that oddity, it was relatively painless to configure, and the router even generates keys and the client config file for me to import on my laptop and phone!</p><p>However, there were some more issues with OpenVPN I needed to iron out. Because of the lack of options on my router, I had to manually edit the client confirmation file in order to add my PiHole as the default DNS server and replace the ip address with my dynamic DNS domain. Once the extra configuration was done and the file imported onto my remote devices, I am now able to access my internal services such as my fileserver and my home assistant instance without needing to expose extra ports to WAN!</p><h2 id="access-point"> Access Point <a href="#access-point">#</a></h2><p>The last thing I added since the last update was an access point.</p><p><img src="/img/2022-08-24-Homelab-Part3-VPN-adventures/dlink_ap.jpg" alt="DLink Viper 2600" /></p><p>I added this for 2 reasons, the first is I wanted access point because I bought a VR headset that can use airlink which works over Wi-Fi, And the second reason was that after I converted my old router into a media converter this was the only access point. Again, the main question you may ask is “What was wrong with your old router?”. Firstly, as I literally just said, my old router is now just a media converter. The second reason is my old router had a combined link rate of 1200Mbit/s which is usually distributed to 300 on 2.4GHz and 867 on 5GHz. My new router is a DLink Viper 2600 which is twice the combined link rate meaning that I can theoretically get up to 800Mbit/s on 2.4Ghz and 1,733Mbit/s on 5GHz which is more than enough for airlink.</p><h2 id="conclusion"> Conclusion <a href="#conclusion">#</a></h2><p>Thank you again for reading my semi-coherent ramblings about my ever-growing network setup. I know in the last episode I said my next project was going to be a dedicated NAS, but trust me this time, the next update should be the NAS so stay tuned for that!</p></section><section><nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/posts/2022/06/22/i2c-display"><div class="nav-arrow">Previous</div><span class="post-title">Using an I2C OLED to display Pi-Hole stats</span> </a> <a class="post-nav-item post-nav-home" href="http://zelenyy.info"><div class="nav-arrow">Home</div><span class="post-title">Back to home</span> </a> <a class="post-nav-item post-nav-next" href="/posts/2023/09/10/homelab-part4-new-developments"><div class="nav-arrow">Next</div><span class="post-title">Home Networking Part 4 - New developments</span> </a></nav></section></main><script> document.documentElement.setAttribute('data-theme', 'light'); </script><footer class="social-footer"><p>Patrick Fennell || Zelenyy</p><a href="mailto:patrickfennell3@gmail.com">patrickfennell3@gmail.com</a><div class="social-footer-icons"> <a href="https://github.com/mrmelonson" title="Github!" target="_blank" rel="noopener noreferrer"><i class="fa fa-github" aria-hidden="true"></i></a> <a href="https://github.com/mrmelonson/zelenyy_blog" title="Browse the code!" target="_blank" rel="noopener noreferrer"><i class="fa fa-code" aria-hidden="true"></i></a> <a href="https://twitter.com/Zelenyy_is_cool" title="Twitter!" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter" aria-hidden="true"></i></a> <a href="https://www.linkedin.com/in/patrick-fennell-19a71016a/" title="Linked In!" target="_blank" rel="noopener noreferrer"><i class="fa fa-linkedin" aria-hidden="true"></i></a> <a href="https://fluffs.au/@zelenyy" title="Mastodon!" rel="me"><i class="fa-brands fa-mastodon">M</i></a></div></footer></body></html>
